var F=Object.defineProperty,A=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var w=(e,t,a)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,E=(e,t)=>{for(var a in t||(t={}))L.call(t,a)&&w(e,a,t[a]);if(N)for(var a of N(t))j.call(t,a)&&w(e,a,t[a]);return e},v=(e,t)=>A(e,B(t));import{g as D}from"./miroInstance.b01b0cd8.js";import{r as s,R as T}from"./vendor.836cfe6a.js";import{w as d,i as k,g as U}from"./interviewStickerTools.1fc8bc22.js";function V(e){return Math.floor(Math.random()*e)}const _=(e,t,a)=>{const c=Math.ceil(e.length/t),l=Math.min(a||Number.MAX_SAFE_INTEGER,c),n=[];for(let m=0;m<t;++m){const i=[];for(let p=0;p<l&&e.length>0;++p){const o=V(e.length),u=e.splice(o,1)[0];i.push(u)}n.push({elements:i})}return n},z=(e,t,a)=>e.flatMap((c,l)=>{const n=Math.ceil(Math.sqrt(c.elements.length)),m=l*d,p=n*l*d+m;return c.elements.map((o,u)=>{const f=Math.floor(u/n),b=u%n;return v(E({},o),{x:t+b*d+p,y:a+f*d})})}),G=()=>{const e=D(),[t,a]=s.exports.useState([]);s.exports.useEffect(()=>{e.addListener("SELECTION_UPDATED",r=>{a(r.data.filter(k))}),e.board.selection.get().then(r=>a(r.filter(k)||[]))},[]);const[c,l]=s.exports.useState("2"),[n,m]=s.exports.useState(2),[i,p]=s.exports.useState(!1),[o,u]=s.exports.useState(""),[f,b]=s.exports.useState(),[S,O]=s.exports.useState(!1),I=async()=>{const M=(await e.board.selection.get()).filter(k)||[],P=_(M,n,f),x=await e.board.viewport.get(),y=x.y+d/2,R=x.x+d/2,C=z(P,R,y),g=await e.board.widgets.update(C);await e.board.selection.selectWidgets(g);const h=U(g);h&&await e.board.viewport.set(h),await e.board.ui.closeLeftSidebar()};return s.exports.createElement(s.exports.Fragment,null,s.exports.createElement("h1",null,"Create Random Stacks"),s.exports.createElement("p",{className:"p-small"},"Selected number of stickers with notes: ",t.length),s.exports.createElement("p",{className:"p-medium"},"In an interpretation session, each participant will be given a stack of random stickers, to help building the affinity map (see \u201CContextual Design (2nd Edition)\u201D by Karen Holtzblatt, p. 139)."),s.exports.createElement("p",{className:"p-medium"},"Use this screen to create random stack of stickers from your selection."),s.exports.createElement("div",{className:"form-group"+(i?" error":"")},s.exports.createElement("label",{htmlFor:"numberOfParticipants"},"Number of participants"),s.exports.createElement("input",{className:"input",id:"numberOfParticipants",value:c,type:"number",onChange:r=>{l(r.target.value)},onBlur:()=>{const r=parseInt(c);isNaN(r)?p(!0):m(r)}})),s.exports.createElement("div",{className:"form-group"+(S?" error":"")},s.exports.createElement("label",{htmlFor:"maxNumberOfStickers"},"Max. number of stickers per participant"),s.exports.createElement("p",{className:"p-small"},"Leave this field empty to distribute all available stickers"),s.exports.createElement("input",{className:"input",id:"maxNumberOfStickers",placeholder:!i&&t.length>0?Math.ceil(t.length/n).toString():"",value:o,onChange:r=>u(r.target.value),onBlur:()=>{const r=o!==void 0&&o!==""?parseInt(o):void 0;r&&isNaN(r)?O(!0):b(r)}})),s.exports.createElement("button",{className:"button button-primary",onClick:I,disabled:t.length===0||i||S},t.length===0?"No interview stickers selected":"Create random stacks"))};T.render(s.exports.createElement(G,null),document.getElementById("root"));
