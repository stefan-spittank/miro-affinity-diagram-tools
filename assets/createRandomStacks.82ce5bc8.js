var R=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var N=(e,t,s)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,E=(e,t)=>{for(var s in t||(t={}))A.call(t,s)&&N(e,s,t[s]);if(h)for(var s of h(t))B.call(t,s)&&N(e,s,t[s]);return e},w=(e,t)=>C(e,F(t));import{g as L}from"./miroInstance.b01b0cd8.js";import{r as a,R as j}from"./vendor.836cfe6a.js";import{w as d,i as v,g as U}from"./interviewStickerTools.1fc8bc22.js";function V(e){return Math.floor(Math.random()*e)}const _=(e,t,s)=>{const c=Math.ceil(e.length/t),l=Math.min(s||Number.MAX_SAFE_INTEGER,c),n=[];for(let m=0;m<t;++m){const i=[];for(let p=0;p<l&&e.length>0;++p){const o=V(e.length),u=e.splice(o,1)[0];i.push(u)}n.push({elements:i})}return n},z=(e,t,s)=>e.flatMap((c,l)=>{const n=Math.ceil(Math.sqrt(c.elements.length)),m=l*d,p=n*l*d+m;return c.elements.map((o,u)=>{const f=Math.floor(u/n),b=u%n;return w(E({},o),{x:t+b*d+p,y:s+f*d})})}),D=()=>{const e=L(),[t,s]=a.exports.useState([]);a.exports.useEffect(()=>{e.addListener("SELECTION_UPDATED",r=>{s(r.data.filter(v))}),e.board.selection.get().then(r=>s(r.filter(v)||[]))},[]);const[c,l]=a.exports.useState("2"),[n,m]=a.exports.useState(2),[i,p]=a.exports.useState(!1),[o,u]=a.exports.useState(""),[f,b]=a.exports.useState(),[S,O]=a.exports.useState(!1),I=async()=>{const r=_(t,n,f),k=await e.board.viewport.get(),M=k.y+d/2,P=k.x+d/2,y=z(r,P,M),x=await e.board.widgets.update(y);await e.board.selection.selectWidgets(x);const g=U(x);g&&await e.board.viewport.set(g),await e.board.ui.closeLeftSidebar()};return a.exports.createElement(a.exports.Fragment,null,a.exports.createElement("h1",null,"Create Random Stacks"),a.exports.createElement("p",{className:"p-small"},"Selected number of stickers with notes: ",t.length),a.exports.createElement("p",{className:"p-medium"},"In an interpretation session, each participant will be given a stack of random stickers, to help building the affinity map (see \u201CContextual Design (2nd Edition)\u201D by Karen Holtzblatt, p. 139)."),a.exports.createElement("p",{className:"p-medium"},"Use this screen to create random stack of stickers from your selection."),a.exports.createElement("div",{className:"form-group"+(i?" error":"")},a.exports.createElement("label",{htmlFor:"numberOfParticipants"},"Number of participants"),a.exports.createElement("input",{className:"input",id:"numberOfParticipants",value:c,type:"number",onChange:r=>{l(r.target.value)},onBlur:()=>{const r=parseInt(c);isNaN(r)?p(!0):m(r)}})),a.exports.createElement("div",{className:"form-group"+(S?" error":"")},a.exports.createElement("label",{htmlFor:"maxNumberOfStickers"},"Max. number of stickers per participant"),a.exports.createElement("p",{className:"p-small"},"Leave this field empty to distribute all available stickers"),a.exports.createElement("input",{className:"input",id:"maxNumberOfStickers",placeholder:!i&&t.length>0?Math.ceil(t.length/n).toString():"",value:o,onChange:r=>u(r.target.value),onBlur:()=>{const r=o!==void 0&&o!==""?parseInt(o):void 0;r&&isNaN(r)?O(!0):b(r)}})),a.exports.createElement("button",{className:"button button-primary",onClick:I,disabled:t.length===0||i||S},t.length===0?"No interview stickers selected":"Create random stacks"))};j.render(a.exports.createElement(D,null),document.getElementById("root"));
